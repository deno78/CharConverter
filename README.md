# CharConverter
文字コンバートツール

## 概要

Unicode文字変換ツールです。文字設定ファイルに基づいて、入力ファイル内の文字を指定された文字に変換して出力ファイルに保存します。

## 実行方法（Windows）

### 方法1: カスタムJREを使用（推奨）

Javaをインストールせずに実行できます：

1. `setup-jre.bat` を**管理者権限**で実行してカスタムJREを生成します
   ```
   setup-jre.bat
   ```
   
2. `run.bat` を実行してCharConverterを起動します
   ```
   run.bat <文字設定ファイル> <入力ファイル> <出力ファイル>
   ```

### 方法2: システムのJavaを使用

1. Java 8以降がインストールされていることを確認してください
2. `run.bat` を実行してCharConverterを起動します
   ```
   run.bat <文字設定ファイル> <入力ファイル> <出力ファイル>
   ```

**注意**: `run.bat` は自動的にカスタムJREの存在を確認し、利用可能であればカスタムJREを優先して使用します。

### 例
```
run.bat mapping.txt input.txt output.txt
```

## 文字設定ファイルの形式

文字設定ファイルには、4桁の16進数でUnicode文字のコードポイントをカンマ区切りで記載します。
形式：`変換元コードポイント,変換先コードポイント`

### 例
```
46CF,5780
3042,3044
```

この例では：
- 䛏 (U+46CF) を 垀 (U+5780) に変換
- あ (U+3042) を い (U+3044) に変換

## ファイル形式

- 入力ファイル：UTF-8エンコーディング
- 出力ファイル：UTF-8エンコーディング
- 文字設定ファイル：UTF-8エンコーディング

## ファイル構成

- `CharConverter.groovy` - メインのGroovyスクリプト
- `run.bat` - Windows用実行バッチファイル  
- `setup-jre.bat` - Windows用カスタムJRE生成バッチファイル
- `lib/groovy-all-2.4.21.jar` - Groovy 2.4.21 ランタイム
- `jre/` - カスタムJREディレクトリ（setup-jre.bat実行後に生成）

## セットアップについて

### カスタムJRE生成の詳細

`setup-jre.bat` は以下の処理を自動実行します：

1. **winget** を使用してOpenJDK 17を一時的にインストール
2. **jlink** コマンドでGroovy実行に必要なJavaモジュールのみを抽出したカスタムJREを生成
3. 一時的にインストールしたOpenJDKをアンインストール

生成されるカスタムJREは軽量で、システムへのJavaインストールが不要になります。

### 必要な権限

- `setup-jre.bat` の実行には**管理者権限**が必要です（wingetによるソフトウェアのインストール/アンインストールのため）
- `run.bat` の実行には管理者権限は不要です
